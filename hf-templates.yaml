templates:
  default: &default
    chart: ./services/{{ .Release.Name }}
    namespace: default
    missingFileHandler: Warn
    timeout: 900
    values:
      - config/{{ .Release.Name }}/values.yaml
      - config/{{ .Release.Name }}/values.yaml.gotmpl


  default_with_json_logs: &default_json
    <<: *default
    values:
      - config/{{ .Release.Name }}/values.yaml
      - config/{{ .Release.Name }}/values.yaml.gotmpl
      - podAnnotations:
          co.elastic.logs/enabled: "true"
          co.elastic.logs/json.keys_under_root: "true"
          co.elastic.logs/json.overwrite_keys: "true"
          co.elastic.logs/json.add_error_key: "true"
          co.elastic.logs/processors.1.decode_json_fields.fields: "log"
          co.elastic.logs/processors.1.decode_json_fields.max_depth: "5"
          co.elastic.logs/processors.1.decode_json_fields.target: ""
          co.elastic.logs/processors.1.decode_json_fields.overwrite_keys: "true"
          co.elastic.logs/processors.1.decode_json_fields.add_error_key: "true"

  default_generic: &generic
    <<: *default
    chart: ./generic_charts/stateless/

  generic_json: &generic_json
    <<: *default
    chart: ./generic_charts/stateless/
    values:
      - config/{{ .Release.Name }}/values.yaml
      - config/{{ .Release.Name }}/values.yaml.gotmpl
      - logs:
          json: true

  
